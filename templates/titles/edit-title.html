<div class="pane-container width-100">

    <!-- Новый титул -->
    <div class="pane width-100">
        <div class="header">
            <span class="caption">Редактирование титула</span>
        </div>
        <div class="content y-scrollable no-padding">
            <div class="row height-100">
                <div id="new-title-template-content" class="width-80 height-100 y-scrollable">

                    <!-- Наименование титула -->
                    <div class="row split-20">
                        <div class="width-20">&nbsp;</div>
                        <div class="width-60">
                            <div class="width-100">
                                <label for="new-title-title">Наименование титула</label>
                                <input type="text"
                                       name="new-title-title"
                                       id="new-title-title"
                                       class="width-100"
                                       placeholder="Наименование титула"
                                       ng-model="title.title.value"
                                       ng-change="title._states_.changed(true)"/>
                            </div>
                        </div>
                        <div class="width-20">&nbsp;</div>
                    </div>

                    <!-- Описание титула -->
                    <div class="row split-30">
                        <div class="width-20">&nbsp;</div>
                        <div class="width-60">
                            <label for="new-title-description">Описание титула</label>
                            <input type="text"
                                   name="new-title-description"
                                   id="new-title-description"
                                   class="width-100"
                                   placeholder="Описание титула"
                                   ng-model="title.description.value"/>
                        </div>
                        <div class="width-20">&nbsp;</div>
                    </div>

                    <!-- Узлы в начале и в конце титула -->
                    <div class="row split-30">
                        <div class="width-20">&nbsp;</div>
                        <div class="width-20">
                            <div class="row">
                                <div class="width-100">
                                    <div class="row block-title text-centered">
                                        Объект в начале титула
                                    </div>

                                    <!-- Иконка узла в начале титула -->
                                    <div class="row node-icon pylon big"></div>

                                    <!-- Тип узла в начале титула -->
                                    <div class="row split-10">
                                        <label for="new-title-start-node-type">Тип объекта</label>
                                        <select name=new-title-start-node-type""
                                                id="new-title-start-node-type"
                                                class="width-100"
                                                ng-model="title.startNodeTypeId.value"
                                                ng-options="type.id.value as type.title.value for type in nodes.types.items | onlyBasicNodes">
                                        </select>
                                    </div>

                                    <!-- Линия -->
                                    <div class="row split-10" ng-show="title.startNodeTypeId.value === 1">
                                        <label for="new-title-start-node-powerline">Линия</label>
                                        <select name="new-title-start-node-power-line"
                                                id="new-title-start-node-powerline"
                                                class="width-100"
                                                ng-model="startNodePowerLineId"
                                                ng-options="powerline.id.value as powerline.display for powerline in misc.powerLines.items"
                                                ng-change="selectStartNodePowerLine(startNodePowerLineId)">
                                        </select>
                                    </div>

                                    <!-- # опоры -->
                                    <div class="row" ng-show="title.startNodeTypeId.value === 1">
                                        <label for="new-title-start-node-pylon-number"># Опоры</label>
                                        <input type="text"
                                               name="new-title-start-node-pylon-number"
                                               id="new-title-start-node-pylon-number"
                                               class="width-100" placeholder="# Опоры"
                                               ng-model="title.startNodeId.value"
                                               ng-disabled="startNodePylons._states_.loaded() === false"
                                               typeahead
                                               typeahead-data-source="startNodePylons.items"
                                               typeahead-items-limit="10"
                                               typeahead-model-field="id"
                                               typeahead-display-field="number"/>
                                    </div>

                                </div>
                            </div>
                        </div>
                        <div class="width-20 text-centered mdash">&mdash;</div>

                        <div class="width-20">
                            <div class="row">
                                <div class="width-100">
                                    <div class="row block-title text-centered">
                                        Объект в конце титула
                                    </div>
                                    <!-- Иконка узла в конце титула -->
                                    <div class="row node-icon pylon big">

                                    </div>
                                    <!-- Тип узла в конце титула -->
                                    <div class="row split-10">
                                        <label for="new-title-end-node-type">Тип объекта</label>
                                        <select name=new-title-end-node-type""
                                                id="new-title-end-node-type"
                                                class="width-100"
                                                ng-model="title.endNodeTypeId.value"
                                                ng-options="type.id.value as type.title.value for type in nodes.types.items | onlyBasicNodes">
                                        </select>
                                    </div>

                                    <!-- Линия -->
                                    <div class="row split-10" ng-show="title.endNodeTypeId.value === 1">
                                        <label for="new-title-end-node-powerline">Линия</label>
                                        <select name="new-title-end-node-powerline"
                                                id="new-title-end-node-powerline"
                                                class="width-100"
                                                ng-model="endNodePowerLineId"
                                                ng-options="powerline.id.value as powerline.title.value for powerline in misc.powerLines.items"
                                                ng-change="selectEndNodePowerLine(endNodePowerLineId)">
                                        </select>
                                    </div>

                                    <!-- # опоры -->
                                    <div class="row" ng-show="title.endNodeTypeId.value === 1">
                                        <label for="new-title-end-node-pylon-number"># Опоры</label>
                                        <input type="text"
                                               name="new-title-end-node-pylon-number"
                                               id="new-title-end-node-pylon-number"
                                               class="width-100"
                                               placeholder="# Опоры"
                                               ng-model="title.endNodeId.value"
                                               ng-disabled="endNodePylons._states_.loaded() === false"
                                               typeahead
                                               typeahead-items-limit="10"
                                               typeahead-data-source="endNodePylons.items"
                                               typeahead-model-field="id"
                                               typeahead-display-field="number"/>
                                    </div>

                                </div>
                            </div>
                        </div>
                        <div class="width-20">&nbsp;</div>
                    </div>
                </div>
                <div class="width-20 height-100 service-panel">

                    <div class="row split-10">
                        <div class="width-100 text-centered">
                            <button class="green width-80 centered" ng-click="validate()" ng-disabled="title._states_.changed() === false">Сохранить изменения</button>
                        </div>
                    </div>

                    <div class="row split-10">
                        <div class="width-100 text-centered">
                            <button class="red width-80 centered" ng-show="title._states_.changed() === true" ng-click="validate()">Отмена</button>
                        </div>
                    </div>

                    <div class="row split-30">
                        <div class="width-100 text-centered">
                            <button class="blue width-80 centered" ng-show="title._states_.changed() === false" ng-click="gotoTitles()">Перейти в раздел титулов</button>
                        </div>
                    </div>

                    <div class="row">
                        <div class="width-100 text-centered messages-container errors">
                            <div class="width-80 centered message-item error text-left" ng-repeat="error in errors track by $id(error)">{{ error }}</div>
                        </div>
                    </div>

                    <div class="row" ng-show="title._states_.loaded() === true">
                        <div class="width-100 text-centered messages-container success">
                            <div class="width-80 centered message-item success text-left">Изменения сохранены успешно</div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>

</div>